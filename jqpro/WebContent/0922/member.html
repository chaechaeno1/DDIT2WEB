<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<!-- 외부CSS -->
<link rel="stylesheet" href="../css/public.css">

<!-- 외부스크립트 -->
<script src="../js/jquery-3.7.1.min.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>

<!-- 내부스크립트 -->
<script>

var xhr = new XMLHttpRequest();
//Promise // fetch ... 

$(function(){
	$('#member').on('click', function(){
		//요청
		xhr.open("get", "member.jsp",true);
		xhr.send();
		
		//응답
		xhr.onreadystatechange = function(){
			if(this.readyState == 4 && this.status == 200){
				res = JSON.parse(this.responseText);
				// this.responseText 가 JSON으로 parse불가능한 text면 error 발생. ex) html 코드
				// 만약 error가 났다면, member.jsp에서 확인
				
				//출력내용
				code = "<table class='table table-hover' border='1'>";
				code += "<tr><th>아이디</th>";
				code += "<th>이름</th><th>주소</th>";
				code += "<th>전화번호</th></tr>";
				
				$.each(res, function(i,v){
					// res[i].id = v.id
					code += "<tr><td>" +res[i].id+ "</td>";
					code += "<td>"+res[i].name+"</td><td>"+v.addr+"</td>";
					code += "<td>"+v.hp+"</td></tr>";
					
				})
				code += "</table>";
								
				//출력
				$('#result1').html(code);
				
			}
			7
		}
		
		
	})
	
})

</script>


</head>
<body>
	
	<h2></h2>
	<input type="button" value="MemberList" id="member">
	<br><br>
	<div id="result1"></div>
	<hr color="red">
	<br><br>

</body>
</html>